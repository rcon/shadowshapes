<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<!-- 
shadowshapes.com - Roderick Constance
coded by Roderick Constance, 2011
-->

<HTML>
<HEAD>
<TITLE>shadowshapes: Roderick Constance</TITLE>
<LINK rel="stylesheet" type="text/css" href="css/main2.css" media="screen" />
<SCRIPT type="text/javascript" src="js/jquery-1.4.2.min.js"></SCRIPT>
<SCRIPT type="text/javascript" src="js/jquery.ba-hashchange-1.1.min.js"></SCRIPT> 
<SCRIPT type="text/javascript">

/* TODO 
about, contact
nav design
font
*arrow click
gzip
*button mashing

iphone,ipad?
cache font in the future
check image load error
bug complete
*/

function showContent(nav) {
    getImages = "getImages.php?id=" + nav;
    $.getJSON(getImages, function(json) {
        var max = json.length;
        if (max > 0)
        {
            loadImage(0, max);
        }      
        var new_width = 0;
        var ballpark = 600;
        var scroll_step = 400;
        var navhash = "#" + nav;
        $('#thumbs').empty().css('left', '0px').show();
        $('#scroll').width(800);
        var overflow = new Boolean(false);
        var gate_resize = new Boolean(false);
        var arrow_opacity = 0.5;

        function setScrollControl(scroll_step) {
//            var left_opacity = $('#leftarrow').css('opacity');
//            var right_opacity = $('#rightarrow').css('opacity');
//            $('#leftarrow').mousedown(function () {
//                $(this).css({'opacity': '0.75'});
//            }).mouseup(function () {
//                $(this).css({ 'opacity': left_opacity });
//            });
//            $('#rightarrow').mousedown(function () {
//                $(this).css({'opacity': '0.75'});
//            }).mouseup(function () {
//                $(this).css({ 'opacity': right_opacity });
//            });

            $('#leftarrow').click(function() {
                thumbs_left = $('#thumbs').offset().left;
                gate_left = $('#gate').offset().left;
                gap_left = gate_left - thumbs_left;
                if (thumbs_left < gate_left) {
                    if (gap_left >= scroll_step) {
                        $('#thumbs').animate({'left': '+=' + scroll_step + 'px'}, 200);
                        if (gap_left == scroll_step) {
                            $('#leftarrow').css({'opacity': arrow_opacity });
                        }                      
                    } else {
                        $('#thumbs').animate({'left': '+=' + gap_left + 'px'}, 200, function() {
                            $('#leftarrow').css({'opacity': arrow_opacity });
                        });
                    }
                    $('#rightarrow').css({'opacity': '1.0'});
                }
            });
            $('#rightarrow').click(function() {
                thumbs_right = $('#thumbs').offset().left + $('#thumbs').width();
                gate_right = $('#gate').offset().left + $('#gate').width();
                gap_right = thumbs_right - gate_right;
                if (thumbs_right > gate_right) {
                    if (gap_right >= scroll_step) {
                        $('#thumbs').animate({'left': '-=' + scroll_step + 'px'}, 200);
                        if (gap_right == scroll_step) {
                            $('#rightarrow').css({'opacity': arrow_opacity });
                        }
                    } else {
                        $('#thumbs').animate({'left': '-=' + gap_right + 'px'}, 200, function() {
                            $('#rightarrow').css({'opacity': arrow_opacity });
                        });
                    }
                    $('#leftarrow').css({'opacity': '1.0'});                  
                }
            });
        }

        function loadImage(index, max) {
            if ((location.hash).substring(1) == nav)
            {
                if (index < max)
                {
                    var newimg = new Image();
                    $(newimg).load(function () {
                        if ((location.hash).substring(1) == nav)
                        {
                            
                            $('#thumbs').append(this);
                            $(this).hide();
                            $(this).removeClass().addClass("img-thumbs");
                            $(this).wrap('<A class="thumbs" href="' + navhash + '">');
                            if (max - index > 1) 
                            {
                                $(this).css('margin-right', '10px');
                            }
                            
                            if ($('#thumbs').width() < ballpark)        
                            {
                                new_width += $(this).outerWidth(true);  
                                $('#gate').width(new_width);          
                            }
                            else { 
                                overflow = true;
                                if (gate_resize == false) {
                                    $('#gate').width($('#gate').width() - 10);
                                    gate_resize = true;
                                }
                                $('#rightarrow').animate({'opacity': '1.0'}, 100);
                                $('#leftarrow').animate({'opacity': arrow_opacity}, 100);
                            }
                            
                            $(this).fadeIn(100, function() {
                                if (max - index == 1)
                                {
                                    var w = $('#gate').outerWidth(true) + ($('#leftarrow').outerWidth(true) * 2);
                                    $('#scroll').width(w);
                                    if (overflow == true) 
                                    {
                                        setScrollControl(scroll_step);
                                    }
                                }
                                else loadImage(index + 1, max);
                            });
                        }
                    }).attr('src', json[index]);
                }
            }
        };
    });
}

$(document).ready(function() {

    $('img.img-thumbs').live('click', function() {
        var _img = new Image();
        var url = ($(this).attr('src')).replace("thumbs", "content");
        arr = (url.split("/"));
        shortcut = "_" + (arr[(arr.length - 1)]).split(".")[0];
        $('#caption').fadeOut(300, function() {
            $('#caption').html($('#spinner').html());
            $('#caption').removeClass();
            $('#caption').fadeIn(300, function() {
                $(_img).one("load", function() {
                    $('#caption').fadeOut(300, function () {
                        url = '<A class="caption" href=http://shadowshapes.com/dev/' + url + '>Image Link</A>';
                        $(this).html($('#' + shortcut).html());
                        $(this).append(url);
                        $('#loader').fadeOut(300, function() {
                            $(this).empty();
                            $(this).removeClass().addClass("loaded visible fadeMe").append($(_img));
                            $(this).fadeIn(300);
                            $('#caption').fadeIn(300);
                        });
                    });
                }).attr('src', url);
            });
        });
    });
        
    jQuery.hashchangeDelay = 100; // in milliseconds

    $(function() { 
        $(window).bind('hashchange', function() {
            var nav = (location.hash).substring(1);
            if (nav != '')
            {
                var elements = $('.fadeMe').length;
                $('.arrow').unbind("click").animate({'opacity': '0'}, 200);
                $('.fadeMe').fadeOut(200, function() {
                    elements--
                    if (!elements)
                    {
                        showContent(nav);
                    }
                });
            }
        });
    })

    if (location.hash != '')
    {
        $(window).trigger('hashchange');
    }
});


</SCRIPT>
</HEAD>
<BODY>
<DIV id="window">
    <DIV id="left">
        <DIV id="nav">
            <DIV id="menu">
                    <HR class="dash">
                    <P class="menu">ILLUSTRATION<BR />
                    <P class="menusub"><A href="#2011" class="nav">2011</A></P>
                    <P class="menusub"><A href="#2010" class="nav">2010</A></P>
                    <HR class="dash">
                    <P class="menu"><A href="#sketches" class="nav">SKETCHBOOK</A></P>
                    <HR class="dash">
                    <P class="menu">BLOG (coming soon)</P>
                    <HR class="dash">
                    <P class="menu"><A href="#about" class="nav">ABOUT</A></P>
                    <HR class="dash">
                    <P class="menu"><A href="#contact" class="nav">CONTACT</A></P>
                    </P>
            </DIV>
            <DIV id="caption"></DIV>
        </DIV>
        <DIV id="copyright">
                <P class="copyright">&copy 2011 RODERICK CONSTANCE</P>
        </DIV>
    </DIV>
    <DIV id="right">
        <DIV id="scroll">
            <DIV id="leftarrow" class="arrow">
                <IMG class="arrows" src="images/main/leftarrow.png" />
            </DIV>
            <DIV id="gate">
                <DIV id="thumbs" class="fadeMe"></DIV>
            </DIV>
            <DIV id="rightarrow" class="arrow">
                <IMG class="arrows" src="images/main/rightarrow.png" />
            </DIV>
        </DIV>
        <DIV id="content">
            <DIV id="loader" class="hidden fadeMe"></DIV>
        </DIV>    
    </DIV>
</DIV>

<DIV id="spinner" class="hidden"><IMG class="spinner" src="images/main/ajax-loader.gif"></DIV>

<DIV id="hidden-contact" class="hidden">
    <DIV class="contact">
        415.236.3736<BR />
        <A class="about" href="mailto:rcon@shadowshapes.com">rcon@shadowshapes.com</A><BR />
        <A class="about" href="http://shadowshapes.com/sketchblog">sketchblog</A><BR />
        skype: rcon.shadowshapes<BR />
    </DIV>
    <DIV class="iconrow">
        <A class="about" href="http://www.behance.net/shadowshapes"><IMG class="about" src="images/main/icon-behance.png"></A>
        <A class="about" href="http://www.flickr.com/photos/61171258@N07/"><IMG class="about" src="images/main/icon-flickr.png"></A>
        <A class="about" href="http://shadowshapes.tumblr.com"><IMG class="about" src="images/main/icon-tumblr.png"></A>
        <A class="about" href="http://twitter.com/shadowshapes"><IMG class="about" src="images/main/icon-twitter.png"></A>
        <A class="about" href="http://www.facebook.com/profile.php?id=100002281453190"><IMG class="about" src="images/main/icon-facebook.png"></A>
    </DIV>
</DIV>

<DIV id="hidden-about" class="hidden">:9</DIV>

<DIV id='_20110316-02' class="hidden"><P class="title">Bouncing Dragon</P>Shadowshapes Comics<BR /></DIV>

</BODY>
</HTML>